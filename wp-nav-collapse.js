(function(){var e;e=jQuery,e.fn.menuCollapse=function(t){var n,r;return r={menuListItem:"ul.menu li",togglerElem:"a",togglerClass:"toggler",closedSymbol:"+",openSymbol:"-",speed:"400"},r=e.extend(r,t),n={init:function(){var t=this;return n.destroy(),e(""+r.menuListItem).each(function(t,i){var o,u,a,f,l,c;f=e(i).prev("li"),u=e(i).next("li"),l=n.getDepth(e(i)),o=n.getDepth(u),a=n.getDepth(f),c=""+r.togglerElem+"."+r.togglerClass;if(l<o&&o!==!1)return n.addToggler(e(i));if(l>o||l===o||o===!1)return n.destroy(u.find(c));if(l>a||l===a||a===!1)return n.destroy(f.find(c))}),e(""+r.togglerElem+"."+r.togglerClass).bind("click",n.clickEvent),this},getDepth:function(e){var t;return t=e.attr("class"),typeof t!="undefined"&&t!=null?(t=t.match(/menu-item-depth-./).toString(),parseInt(t.charAt(t.length-1))):!1},addToggler:function(e,t){var n;return t==null&&(t="open"),n=r.openSymbol,t==="close"&&(n=r.closedSymbol),e.append("<"+r.togglerElem+" class='"+r.togglerClass+"' rel='"+t+"'>"+n+"</"+r.togglerElem+">")},getChildren:function(t,r){var i,s,o,u,a=this;return r==null&&(r=!1),o=t.parent("li"),s=n.getDepth(o),i=e(),u=o.nextAll("li"),u.each(function(t,o){if(s<n.getDepth(e(o)||s===n.getDepth(e(o))))if(r===!0){if(s<n.getDepth(e(o)))return i=i.add(e(o))}else if(s-n.getDepth(e(o))===-1)return i=i.add(e(o))}),i},getState:function(t){if(typeof t===void 0)return!1;if(typeof e(t).attr("rel")!==void 0)return e(t).attr("rel")},switchToggler:function(e,t){return t==="open"&&e.attr("rel","closed").text(""+r.closedSymbol),t==="closed"&&e.attr("rel","open").text(""+r.openSymbol),e.attr("rel")},clickEvent:function(t){var i,o=this;return t.preventDefault(),i=n.getState(this),i==="open"?n.getChildren(e(this),!0).slideUp(r.speed):i==="closed"&&(n.getChildren(e(this),!0).each(function(t,i){var o;o=e(i).find(""+r.togglerElem+"."+r.togglerClass);if(n.getState(o)==="open")return n.getChildren(o).slideDown(""+r.speed/2)}),n.getChildren(e(this)).slideDown(r.speed)),n.switchToggler(e(this),i)},destroy:function(t){return t==null&&(t=null),t===null&&(t=e(""+r.togglerElem+"."+r.togglerClass)),t.unbind("click",n.clickEvent).remove()}},n.init(),e.extend(n,r)},e(document).ready(function(){var t;return t=e().menuCollapse(),e(""+t.togglerElem+"."+t.togglerClass).click(),e("ul.menu").bind("sortstop",function(){return setTimeout("jQuery().menuCollapse()",500)})})}).call(this)